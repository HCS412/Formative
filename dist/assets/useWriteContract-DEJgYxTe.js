import{A as F,X as m,j as T,p as x,a9 as P,aa as h,ab as R,ac as I,a as A,ad as b,ae as q,af as $,ag as y,y as _,ah as E,ai as G}from"./useChainId-D7YJGvzg.js";import{s as O}from"./sendTransaction-vTUveoQV.js";async function w(t,a){return w.internal(t,O,"sendTransaction",a)}(function(t){async function a(n,e,c,o){const{abi:r,account:s=n.account,address:u,args:d,dataSuffix:i,functionName:p,...l}=o;if(typeof s>"u")throw new F({docsPath:"/docs/contract/writeContract"});const f=s?x(s):null,C=m({abi:r,args:d,functionName:p});try{return await T(n,e,c)({data:`${C}${i?i.replace("0x",""):""}`,to:u,account:f,...l})}catch(g){throw P(g,{abi:r,address:u,args:d,docsPath:"/docs/contract/writeContract",functionName:p,sender:f?.address})}}t.internal=a})(w||(w={}));async function Q(t,a){const{chainId:n,timeout:e=0,...c}=a,o=t.getClient({chainId:n}),s=await h(o,R,"waitForTransactionReceipt")({...c,timeout:e});if(s.status==="reverted"){const u=h(o,I,"getTransaction"),{from:d,...i}=await u({hash:s.transactionHash}),l=await h(o,A,"call")({...i,account:d,data:i.input,gasPrice:i.type!=="eip1559"?i.gasPrice:void 0,maxFeePerGas:i.type==="eip1559"?i.maxFeePerGas:void 0,maxPriorityFeePerGas:i.type==="eip1559"?i.maxPriorityFeePerGas:void 0}),f=l?.data?b(`0x${l.data.substring(138)}`):"unknown reason";throw new Error(f)}return{...s,chainId:o.chain.id}}async function K(t,a){const{account:n,chainId:e,connector:c,...o}=a;let r;return typeof n=="object"&&n?.type==="local"?r=t.getClient({chainId:e}):r=await q(t,{account:n??void 0,assertChainId:!1,chainId:e,connector:c}),await h(r,w,"writeContract")({...o,...n?{account:n}:{},chain:e?{id:e}:null})}function j(t,a={}){return{async queryFn({queryKey:n}){const{hash:e,...c}=n[1];if(!e)throw new Error("hash is required");return Q(t,{...c,onReplaced:a.onReplaced,hash:e})},queryKey:M(a)}}function M(t={}){const{onReplaced:a,...n}=t;return["waitForTransactionReceipt",$(n)]}function N(t){return{mutationFn(a){return K(t,a)},mutationKey:["writeContract"]}}function k(t={}){const{hash:a,query:n={}}=t,e=y(t),c=_({config:e}),o=j(e,{...t,chainId:t.chainId??c}),r=!!(a&&(n.enabled??!0));return E({...n,...o,enabled:r})}function v(t={}){const{mutation:a}=t,n=y(t),e=N(n),{mutate:c,mutateAsync:o,...r}=G({...a,...e});return{...r,writeContract:c,writeContractAsync:o}}export{k as a,v as u,w};
