import{c as y,u as O,a as Y,r as n,j as e,D as E,C as c,b as j,d as g,W as i,e as N,B as d,f as P,g as r,h as W,i as o,k as F,S as q,M as J,E as V}from"./index-Cv2ChKsg.js";import{u as G,C as K}from"./en_US-KAK2ZBDO-VKXi194y.js";import{u as Q}from"./useChainId-DwGsnTkY.js";import"./isAddressEqual-yN5OPZ83.js";import"./secp256k1-DQg8nelV.js";const X=[["path",{d:"M11.767 19.089c4.924.868 6.14-6.025 1.216-6.894m-1.216 6.894L5.86 18.047m5.908 1.042-.347 1.97m1.563-8.864c4.924.869 6.14-6.025 1.215-6.893m-1.215 6.893-3.94-.694m5.155-6.2L8.29 4.26m5.908 1.042.348-1.97M7.48 20.364l3.126-17.727",key:"yr8idg"}]],Z=y("bitcoin",X);const ee=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],se=y("credit-card",ee);const te=[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]],ae=y("unlink",te),x=8;function de(){const{user:A}=O(),{addToast:t}=Y(),{address:a,isConnected:m,chain:p}=Q(),{disconnect:D}=G(),[_,b]=n.useState(!0),[l,h]=n.useState(!1),[v,f]=n.useState(null),[T,u]=n.useState(!1),[w,L]=n.useState([]);n.useEffect(()=>{R();const s=new URLSearchParams(window.location.search),S=s.get("code"),k=s.get("error");S?(M(),window.history.replaceState({},"",window.location.pathname)):k&&(t("Failed to connect Stripe: "+(s.get("error_description")||k),"error"),window.history.replaceState({},"",window.location.pathname))},[]),n.useEffect(()=>{m&&a&&(localStorage.setItem("connectedWallet",JSON.stringify({address:a,chain:p?.name,connectedAt:new Date().toISOString()})),t("Wallet connected successfully!","success"))},[m,a]);const M=async s=>{t("Connecting your Stripe account...","info");try{h(!0),localStorage.setItem("stripeConnected","true"),f({id:"acct_connected",email:A?.email,payoutsEnabled:!0}),t("Stripe account connected successfully!","success")}catch{t("Failed to complete Stripe connection","error")}},R=async()=>{b(!0);try{const s=localStorage.getItem("stripeConnected");h(s==="true"),L([{id:1,type:"received",amount:2500,currency:"USD",method:"stripe",campaign:"Summer Fashion",date:"2024-01-15",status:"completed"},{id:2,type:"received",amount:.05,currency:"ETH",method:"crypto",campaign:"Tech Review",date:"2024-01-10",status:"completed"},{id:3,type:"pending",amount:5e3,currency:"USD",method:"stripe",campaign:"Fitness Partnership",date:"2024-01-20",status:"pending"}])}catch(s){console.error("Failed to load payment settings:",s)}finally{b(!1)}},B=()=>{{u(!0);return}},$=()=>{h(!1),f(null),localStorage.setItem("stripeConnected","false"),t("Stripe account disconnected","success")},z=()=>{D(),localStorage.removeItem("connectedWallet"),t("Wallet disconnected","success")},C=s=>{navigator.clipboard.writeText(s),t("Copied to clipboard!","success")},I=s=>(s*x/100).toFixed(2),U=s=>(s-s*x/100).toFixed(2),H=s=>s?`${s.slice(0,6)}...${s.slice(-4)}`:"";return _?e.jsx(E,{children:e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-teal-500 border-t-transparent rounded-full"})})}):e.jsxs(E,{children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Payments"}),e.jsx("p",{className:"text-[var(--text-secondary)]",children:"Manage how you receive payments for campaigns"})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(c,{children:[e.jsx(j,{children:e.jsxs(g,{className:"flex items-center gap-2",children:[e.jsx(i,{className:"w-5 h-5 text-orange-400"}),"Crypto Wallet"]})}),e.jsx(N,{children:m?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-gradient-to-r from-teal-500/10 to-purple-500/10 border border-teal-500/20",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-gradient-to-br from-teal-500 to-purple-500 flex items-center justify-center",children:e.jsx(i,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-semibold",children:"Wallet Connected"}),e.jsx(d,{variant:"success",children:"Active"})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("code",{className:"text-sm text-[var(--text-secondary)]",children:H(a)}),e.jsx("button",{onClick:()=>C(a),className:"text-[var(--text-muted)] hover:text-white",children:e.jsx(P,{className:"w-4 h-4"})})]}),p&&e.jsxs("p",{className:"text-xs text-[var(--text-muted)] mt-1",children:["Network: ",p.name]})]})]}),e.jsxs(r,{variant:"ghost",size:"sm",onClick:z,className:"text-red-400 hover:text-red-300",children:[e.jsx(ae,{className:"w-4 h-4 mr-2"}),"Disconnect"]})]}),e.jsxs("div",{className:"p-4 rounded-xl bg-[var(--bg-secondary)]",children:[e.jsx("p",{className:"text-xs text-[var(--text-muted)] mb-2",children:"Full Wallet Address"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"text-sm text-teal-400 break-all flex-1",children:a}),e.jsx("button",{onClick:()=>C(a),className:"p-2 rounded-lg hover:bg-[var(--bg-card)] text-[var(--text-muted)] hover:text-white",children:e.jsx(P,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"p-4 rounded-xl bg-green-500/10 border border-green-500/20",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"w-5 h-5 text-green-400"}),e.jsx("p",{className:"text-sm text-green-400",children:"Brands can now send crypto payments directly to your wallet"})]})})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-2xl bg-gradient-to-br from-orange-500/20 to-purple-500/20 flex items-center justify-center",children:e.jsx(i,{className:"w-8 h-8 text-orange-400"})}),e.jsx("h3",{className:"font-semibold mb-2",children:"Connect Your Wallet"}),e.jsx("p",{className:"text-sm text-[var(--text-secondary)] mb-6 max-w-sm mx-auto",children:"Securely connect your crypto wallet to receive payments. Supports MetaMask, Coinbase Wallet, Rainbow, and more."}),e.jsx(K.Custom,{children:({openConnectModal:s})=>e.jsxs(r,{onClick:s,size:"lg",children:[e.jsx(i,{className:"w-5 h-5 mr-2"}),"Connect Wallet"]})}),e.jsx("p",{className:"text-xs text-[var(--text-muted)] mt-4",children:"ðŸ”’ Your wallet connection is secure and verified"})]})})]}),e.jsxs(c,{children:[e.jsx(j,{children:e.jsxs(g,{className:"flex items-center gap-2",children:[e.jsx(se,{className:"w-5 h-5 text-purple-400"}),"Bank & Card Payments"]})}),e.jsxs(N,{children:[e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-[var(--bg-secondary)]",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl bg-purple-500/20 flex items-center justify-center",children:e.jsx("span",{className:"text-2xl font-bold text-purple-400",children:"S"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-semibold",children:"Stripe Connect"}),l?e.jsx(d,{variant:"success",children:"Connected"}):e.jsx(d,{children:"Not Connected"})]}),e.jsx("p",{className:"text-sm text-[var(--text-secondary)]",children:l?"Receive payments directly to your bank account":"Connect to receive USD, EUR, and card payments"})]})]}),l?e.jsx(r,{variant:"ghost",size:"sm",onClick:$,children:"Disconnect"}):e.jsx(r,{size:"sm",onClick:B,children:"Connect"})]}),l&&v&&e.jsxs("div",{className:"mt-4 p-4 rounded-xl bg-green-500/10 border border-green-500/20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(W,{className:"w-4 h-4 text-green-400"}),e.jsx("span",{className:"text-sm font-medium text-green-400",children:"Payouts Enabled"})]}),e.jsxs("p",{className:"text-sm text-[var(--text-secondary)]",children:["Connected as: ",v.email]})]})]})]}),e.jsxs(c,{children:[e.jsx(j,{children:e.jsx(g,{children:"Payment History"})}),e.jsx(N,{children:w.length===0?e.jsx("p",{className:"text-center text-[var(--text-secondary)] py-8",children:"No payments yet"}):e.jsx("div",{className:"space-y-3",children:w.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-xl bg-[var(--bg-secondary)]",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:o("w-10 h-10 rounded-xl flex items-center justify-center",s.status==="completed"?"bg-green-500/20":"bg-orange-500/20"),children:s.method==="crypto"?e.jsx(Z,{className:o("w-5 h-5",s.status==="completed"?"text-green-400":"text-orange-400")}):e.jsx(F,{className:o("w-5 h-5",s.status==="completed"?"text-green-400":"text-orange-400")})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.campaign}),e.jsx("p",{className:"text-sm text-[var(--text-muted)]",children:s.date})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:o("font-semibold",s.status==="completed"?"text-green-400":"text-orange-400"),children:["+",s.amount," ",s.currency]}),e.jsx(d,{variant:s.status==="completed"?"success":"warning",children:s.status})]})]},s.id))})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(c,{className:"p-5 bg-gradient-to-br from-teal-500/10 to-purple-500/10 border-teal-500/20",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-teal-500/20 flex items-center justify-center",children:e.jsx(F,{className:"w-5 h-5 text-teal-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Platform Fee"}),e.jsxs("p",{className:"text-2xl font-bold text-teal-400",children:[x,"%"]})]})]}),e.jsx("p",{className:"text-sm text-[var(--text-secondary)] mb-4",children:"A small fee is deducted from each payment to support the platform."}),e.jsxs("div",{className:"p-4 rounded-xl bg-[var(--bg-secondary)]",children:[e.jsx("p",{className:"text-xs text-[var(--text-muted)] mb-2",children:"Example: $1,000 campaign"}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-[var(--text-secondary)]",children:"Campaign Value"}),e.jsx("span",{children:"$1,000.00"})]}),e.jsxs("div",{className:"flex justify-between text-orange-400",children:[e.jsxs("span",{children:["Platform Fee (",x,"%)"]}),e.jsxs("span",{children:["-$",I(1e3)]})]}),e.jsxs("div",{className:"flex justify-between font-semibold text-green-400 pt-2 border-t border-[var(--border-color)]",children:[e.jsx("span",{children:"You Receive"}),e.jsxs("span",{children:["$",U(1e3)]})]})]})]})]}),e.jsx(c,{className:"p-5",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(q,{className:"w-5 h-5 text-blue-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Secure Connections"}),e.jsx("p",{className:"text-sm text-[var(--text-secondary)]",children:"Your wallet is connected securely via WalletConnect. We never have access to your private keys or funds."})]})]})}),e.jsxs(c,{className:"p-5",children:[e.jsx("h3",{className:"font-semibold mb-3",children:"Supported Networks"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg bg-[var(--bg-secondary)]",children:[e.jsx("span",{className:"text-blue-400 font-bold",children:"Îž"}),e.jsx("span",{className:"text-sm",children:"Ethereum"})]}),e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg bg-[var(--bg-secondary)]",children:[e.jsx("span",{className:"text-purple-400 font-bold",children:"â—†"}),e.jsx("span",{className:"text-sm",children:"Polygon"})]}),e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg bg-[var(--bg-secondary)]",children:[e.jsx("span",{className:"text-red-400 font-bold",children:"â¬¡"}),e.jsx("span",{className:"text-sm",children:"Optimism"})]}),e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg bg-[var(--bg-secondary)]",children:[e.jsx("span",{className:"text-blue-500 font-bold",children:"â—ˆ"}),e.jsx("span",{className:"text-sm",children:"Arbitrum"})]}),e.jsxs("div",{className:"flex items-center gap-2 p-2 rounded-lg bg-[var(--bg-secondary)] col-span-2",children:[e.jsx("span",{className:"text-blue-400 font-bold",children:"â¬¢"}),e.jsx("span",{className:"text-sm",children:"Base"})]})]})]})]})]}),e.jsx(J,{isOpen:T,onClose:()=>u(!1),title:"Connect Stripe Account",subtitle:"Set up Stripe Connect to receive payments",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"p-4 rounded-xl bg-purple-500/10 border border-purple-500/20",children:e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-xl bg-purple-500/20 flex items-center justify-center",children:e.jsx("span",{className:"text-xl font-bold text-purple-400",children:"S"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold",children:"Stripe Connect"}),e.jsx("p",{className:"text-sm text-[var(--text-secondary)]",children:"Secure payment processing"})]})]})}),e.jsx("div",{className:"space-y-3",children:e.jsx("p",{className:"text-sm text-[var(--text-secondary)]",children:"To enable Stripe payments, the platform admin needs to configure Stripe Connect integration."})}),e.jsx("div",{className:"p-4 rounded-xl bg-teal-500/10 border border-teal-500/20",children:e.jsx("p",{className:"text-sm text-teal-400",children:"ðŸ’¡ For now, you can receive payments via your connected crypto wallet above!"})}),e.jsx("a",{href:"https://dashboard.stripe.com/settings/connect",target:"_blank",rel:"noopener noreferrer",className:"block",children:e.jsxs(r,{variant:"secondary",className:"w-full",children:[e.jsx(V,{className:"w-4 h-4 mr-2"}),"Learn More About Stripe Connect"]})}),e.jsx(r,{variant:"ghost",className:"w-full",onClick:()=>u(!1),children:"Close"})]})})]})}export{de as Payments};
