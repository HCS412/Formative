import{B as w,x as C,v as h,y as T}from"./useChainId-D7YJGvzg.js";import{u as I,a as A}from"./useWriteContract-DEJgYxTe.js";import"./index-DodDctfl.js";import"./sendTransaction-vTUveoQV.js";class E extends w{constructor({value:n}){super(`Number \`${n}\` is not a valid decimal number.`,{name:"InvalidDecimalNumberError"})}}function $(t,n){if(!/^(-?)([0-9]*)\.?([0-9]*)$/.test(t))throw new E({value:t});let[a,e="0"]=t.split(".");const i=a.startsWith("-");if(i&&(a=a.slice(1)),e=e.replace(/(0+)$/,""),n===0)Math.round(+`.${e}`)===1&&(a=`${BigInt(a)+1n}`),e="";else if(e.length>n){const[s,c,u]=[e.slice(0,n-1),e.slice(n-1,n),e.slice(n)],o=Math.round(+`${c}.${u}`);o>9?e=`${BigInt(s)+BigInt(1)}0`.padStart(s.length+1,"0"):e=`${s}${o}`,e.length>n&&(e=e.slice(1),a=`${BigInt(a)+1n}`),e=e.slice(0,n)}else e=e.padEnd(n,"0");return BigInt(`${i?"-":""}${a}${e}`)}function B(t,n="wei"){return $(t,C[n])}const p=[{inputs:[{internalType:"address",name:"_influencer",type:"address"},{internalType:"uint256",name:"_deadline",type:"uint256"},{internalType:"string",name:"_platformCampaignId",type:"string"}],name:"createCampaign",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"_campaignId",type:"uint256"}],name:"approveAndRelease",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_campaignId",type:"uint256"}],name:"cancelCampaign",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"_campaignId",type:"uint256"}],name:"claimAfterDeadline",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"",type:"uint256"}],name:"campaigns",outputs:[{internalType:"address",name:"brand",type:"address"},{internalType:"address",name:"influencer",type:"address"},{internalType:"uint256",name:"amount",type:"uint256"},{internalType:"uint256",name:"platformFee",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"bool",name:"approved",type:"bool"},{internalType:"bool",name:"released",type:"bool"},{internalType:"bool",name:"cancelled",type:"bool"},{internalType:"string",name:"campaignId",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"campaignCount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"}],l={11155111:"0x0000000000000000000000000000000000000000",1:"0x0000000000000000000000000000000000000000",8453:"0x0000000000000000000000000000000000000000"};function v(t){return l[t]||l[11155111]}function W(){const{address:t,isConnected:n}=h(),a=T(),e=v(a),{writeContract:i,data:s,isPending:c,error:u}=I(),{isLoading:o,isSuccess:m}=A({hash:s});return{createEscrowCampaign:async(r,d,y,g)=>{if(!n||!t)throw new Error("Please connect your wallet");if(e==="0x0000000000000000000000000000000000000000")throw new Error("Contract not deployed on this network. Please switch networks or contact support.");const f=Math.floor(new Date(d).getTime()/1e3),b=B(g.toString());return i({address:e,abi:p,functionName:"createCampaign",args:[r,BigInt(f),y],value:b})},approveAndRelease:async r=>{if(!n)throw new Error("Please connect your wallet");return i({address:e,abi:p,functionName:"approveAndRelease",args:[BigInt(r)]})},cancelCampaign:async r=>{if(!n)throw new Error("Please connect your wallet");return i({address:e,abi:p,functionName:"cancelCampaign",args:[BigInt(r)]})},claimAfterDeadline:async r=>{if(!n)throw new Error("Please connect your wallet");return i({address:e,abi:p,functionName:"claimAfterDeadline",args:[BigInt(r)]})},isPending:c||o,isSuccess:m,error:u,hash:s,isConnected:n,address:t,contractAddress:e}}export{W as useCampaignEscrow};
